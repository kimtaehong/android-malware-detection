#!/usr/bin/python
# -*- coding:utf-8 -*-
import logging
import logging.handlers

from util.log_base import MDPLogBase, MyRotatingFileHandler


class FileLogger(MDPLogBase):
    """ 로컬파일(로테이팅) 로그 클래스
    """

    def __init__(self, logger_name, log_file_name, log_level=logging.DEBUG):
        super().__init__()

        # 로거 인스턴스를 만든다.
        self._logger = logging.getLogger(logger_name)

        # 파일 / 스트림 핸들러를 만든다.
        strm_handler = logging.StreamHandler()
        file_handler = MyRotatingFileHandler(log_file_name,
                                             maxBytes=(1024 * 1024 * 10),
                                             backupCount=20)
        # 포매터를 만든다.
        formatter = logging.Formatter('%(asctime)s, [%(levelname)s] > %(message)s')

        # 핸들러에 포매터를 붙인다.
        strm_handler.setFormatter(formatter)
        file_handler.setFormatter(formatter)

        # 로거인스턴스에 핸들러를 붙인다.
        self._logger.addHandler(strm_handler)
        self._logger.addHandler(file_handler)

        # 로그 레벨을 설정한다.
        self._logger.setLevel(log_level)


if __name__ == "__main__":
    pass